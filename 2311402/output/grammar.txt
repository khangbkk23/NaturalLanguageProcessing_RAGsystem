%start Sentences

# ================
# 1. CẤU TRÚC CÂU (GIỮ NGUYÊN)
# ================
Sentences -> Sentence | Sentence Wh

Sentence -> BasicSentence
Sentence -> BasicSentence DeliveryTimePhrase
Sentence -> TimeAdverb BasicSentence
Sentence -> BasicSentence Wh

BasicSentence -> Subject Predicate
BasicSentence -> Predicate
BasicSentence -> DeliveryTimePhrase

Subject -> NounPhrase
Predicate -> VerbPhrase | AdjectivePhrase

# ========================================================
# 2. CỤM DANH TỪ (NÂNG CẤP NGỮ NGHĨA)
# ========================================================
# NounPhrase bây giờ là tập hợp của 2 nhánh riêng biệt:
# 1. Nhánh Đồ ăn (FoodPhrase)
# 2. Nhánh Đồ uống (DrinkPhrase)

NounPhrase -> FoodPhrase
NounPhrase -> DrinkPhrase
NounPhrase -> OtherNounPhrase

# --- Logic ghép Đồ ăn ---
# Đồ ăn + Option Đồ ăn (Phở + Tái) -> OK
# Đồ ăn + Option Chung (Phở + Mang về) -> OK
# Đồ ăn + Option Đồ uống -> KHÔNG CÓ QUY TẮC NÀY (Nên sẽ không bao giờ sinh ra)

FoodPhrase -> FoodCore
FoodPhrase -> FoodPhrase FoodModifier

FoodCore -> FoodName
FoodCore -> Quantifier FoodName
FoodCore -> Quantifier Unit FoodName
FoodCore -> Unit FoodName

FoodModifier -> FoodAdjectivePhrase      # (Cay, Tái...)
FoodModifier -> CommonAdjectivePhrase    # (Lớn, Nhỏ...)
FoodModifier -> PrepositionalPhrase
FoodModifier -> PrepositionAfter

# --- Logic ghép Đồ uống ---
DrinkPhrase -> DrinkCore
DrinkPhrase -> DrinkPhrase DrinkModifier

DrinkCore -> DrinkName
DrinkCore -> Quantifier DrinkName
DrinkCore -> Quantifier Unit DrinkName
DrinkCore -> Unit DrinkName

DrinkModifier -> DrinkAdjectivePhrase    # (Ít đá, Đường...)
DrinkModifier -> CommonAdjectivePhrase   # (Lớn, Nhỏ...)
DrinkModifier -> PrepositionalPhrase
DrinkModifier -> PrepositionAfter

# --- Các danh từ khác (đơn hàng, menu...) ---
OtherNounPhrase -> OtherCore
OtherNounPhrase -> OtherNounPhrase Modifier
OtherCore -> OrderRelated | ProperNoun | Pronoun

# ================
# 3. CỤM ĐỘNG TỪ
# ================
VerbPhrase -> VerbCore
VerbPhrase -> VerbPhrase NounPhrase
VerbPhrase -> VerbPhrase AdjectivePhrase
VerbPhrase -> VerbPhrase DeliveryTimePhrase
VerbPhrase -> VerbPhrase AdverbAfter_Verb
VerbPhrase -> VerbPhrase PrepositionalPhrase
VerbPhrase -> VerbPhrase Conjunction VerbPhrase
VerbPhrase -> VerbPhrase Conjunction NounPhrase

VerbCore -> Verb
VerbCore -> AdverbBefore_Verb Verb

# -----------------------
# 4. CÁC THÀNH PHẦN KHÁC
# -----------------------
# Chia nhỏ Adjective để phục vụ NounPhrase ở trên

AdjectivePhrase -> Adjective
AdjectivePhrase -> AdverbBefore_Adjective Adjective
AdjectivePhrase -> Adjective AdverbAfter_Adjective

FoodAdjectivePhrase -> FoodAdjective
FoodAdjectivePhrase -> AdverbBefore_Adjective FoodAdjective

DrinkAdjectivePhrase -> DrinkAdjective
DrinkAdjectivePhrase -> AdverbBefore_Adjective DrinkAdjective

CommonAdjectivePhrase -> CommonAdjective

PrepositionalPhrase -> Preposition NounPhrase
DeliveryTimePhrase -> giao lúc TimeExpression

# Định nghĩa Modifier chung (cho OtherNounPhrase)
Modifier -> PrepositionalPhrase
Modifier -> AdjectivePhrase
Modifier -> PrepositionAfter

# ----------
# 5. TỪ VỰNG
# ----------
Verb -> OrderVerb | QueryVerb | ModifyVerb | CancelVerb
OrderVerb -> đặt | yêu cầu | đặt thêm | muốn đặt
QueryVerb -> có | xem | kiểm tra | hỏi
ModifyVerb -> thêm | sửa | đổi | muốn đổi
CancelVerb -> hủy | bỏ | xóa | muốn hủy | huỷ | xoá

FoodName -> _MON_AN_MAN_
DrinkName -> _DO_UONG_

FoodAdjective -> _TUY_CHON_DO_AN_
DrinkAdjective -> _TUY_CHON_DO_UONG_
CommonAdjective -> _TUY_CHON_CHUNG_

# Các từ vựng cũ
Noun -> FoodName | DrinkName | OrderRelated | TimeRelated
OrderRelated -> món | đơn | đơn hàng | menu | thực đơn
TimeRelated -> giờ | phút

Adjective -> FoodAdjective | DrinkAdjective | CommonAdjective | PriceAdjective
PriceAdjective -> đắt | rẻ | mắc | phải chăng

ProperNoun -> _TEN_QUAN_
Unit -> _DON_VI_

# Thời gian
TimeAdverb -> TimeExpression
TimeExpression -> hôm nay | hôm qua | ngày mai | bây giờ | TimeNumber giờ | TimeNumber giờ TimeNumber phút
TimeNumber -> 6 | 7 | 8 | 9 | 10 | 11 | 12 | 13 | 14 | 15 | 16 | 17 | 18 | 19 | 20 | 21 | 22 | 30 | 45

# Phó từ
AdverbBefore_Verb -> đã | cũng | chưa | đang | không | muốn | sẽ
AdverbAfter_Verb -> rồi | nhé | nha | ạ
AdverbBefore_Adjective -> rất | cũng | không | khá | hơi
AdverbAfter_Adjective -> lắm | quá

# Giới từ
Preposition -> PrepositionBefore | PrepositionPlace | PrepositionPossessive
PrepositionPossessive -> của
PrepositionBefore -> những | các | cái
PrepositionPlace -> trong | trên | ở | vào | ra
PrepositionAfter -> này | ấy | kia

# Wh-word & Liên từ
Wh -> không | hả | sao | vậy | à
Conjunction -> và | với | cùng | hoặc